--- Modules/_multiprocessing/multiprocessing.h
+++ Modules/_multiprocessing/multiprocessing.h
@@ -23,7 +23,7 @@
 #  define SEM_VALUE_MAX LONG_MAX
 #else
 #  include <fcntl.h>                 /* O_CREAT and O_EXCL */
-#  if defined(HAVE_SEM_OPEN) && !defined(POSIX_SEMAPHORES_NOT_ENABLED)
+#  if defined(HAVE_SEMAPHORE_H) && !defined(POSIX_SEMAPHORES_NOT_ENABLED)
 #    include <semaphore.h>
      typedef sem_t *SEM_HANDLE;
 #  endif
